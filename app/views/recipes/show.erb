<div class="content">
  <%= erb(:"shared/nav") %>

  <div class="recipe-title-bar">
    <h1><%= @recipe.name %></h1>
    <a href="/recipes/<%= @recipe.slug %>/edit">
      <button class="recipes-show__edit-btn btn--hollow">Edit&nbsp;<%= svg_icon(:pencil) %></button>
    </a>
  </div>

  <span id="flash"></span>

  <section class="recipes-show__header-bar">
    <div class="recipes-show__header-image">
      <img src="data:<%= @recipe.image || recipe_image_placeholder %>">
    </div>
    <div class="recipes-show__header-toolbar">
      <div class="recipes-show__header-share-link btn--as-link shareable" data-name="<%= @recipe.slug %>" >
        <a href="" onclick="SimpleeFood.onRecipeShare(event)">
          share
        </a>&nbsp;<%= svg_icon(:share) %>
      </div>
      <% if @recipe.source_url %>
      <div class="recipes-show__header-source-url btn--as-link">
        <a target="_blank" href="<%= @recipe.source_url %>">original url</a>&nbsp;<%= svg_icon(:arrow_top_right) %>
      </div>
      <% end %>
    </div>
  </section>

  <% if @recipe.serving_size %>
  <div class="recipes-show__serving-size">
    <%= @recipe.serving_size %>
  </div>
  <% end %>

  <div class="recipes-show__instructions">
    <section class="recipes-show__ingredients">
      <h2>Ingredients</h2>

      <% @recipe.ingredients.each_with_index do |ingredient, idx| %>
      <input type="checkbox" id="ingredient_<%= idx %>" name="ingredient_<%= idx %>" value="<%= ingredient %>">
      <label for="ingredient_<%= idx %>"> <%= ingredient %></label>
      <br>
      <% end %>
    </section>

    <section class="recipes-show__steps">
      <h2>Steps</h2>
      <ul>
        <% @recipe.steps.each_with_index do |step, idx| %>
        <li class="recipes-show__step-item" data-id="<%= idx + 1 %>" onclick="SimpleeFood.onRecipeStepClick(event)">
          <div class="recipes-show__step-number"><%= idx + 1 %></div>
          <p class="recipes-show__step-text"><%= step %></p>
        </li>
        <% end %>
      </ul>
    </section>
  </div>

  <div class="recipes-show__tags">
  <% if @recipe.tags.any? %>
    <% @recipe.tags.each_with_index do |tag| %>
    <a class="tag" href="/tags/<%= tag.slug %>"><%= tag.name.downcase %></a>
    <% end %>
  </div>
  <% end %>

  <div class="recipes-show__created-at">
    created <%= @recipe.created_at.strftime("%Y-%m-%d") %>
  </div>

  <div class="recipes-show__delete-btn btn--as-link">
    <a onclick="SimpleeFood.onRecipeDelete('/recipes/<%= @recipe.slug %>'); return false;">
      delete this recipe
    </a>
  </div>
</div>
